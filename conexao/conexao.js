
/*
BASE CRIADA POR: BLACKZIN DO LUFFY
BASE APRIMORADA POR: PQP VIRUS
ğ™¾ğš•ğšŠ ğšğšœğšğšŠğš›ğš’ğš˜ ğšğš ğš‹ğš˜ğšğšœ, ğšğš ğšœğš˜ğš ğš˜ ğš…ğ™¸ğšğš„ğš‚, ğš™ğšŠğš›ğšŠ ğššğšğšğš– ğš—ğšŠğš˜ ğš–ğš ğšŒğš˜ğš—ğš‘ğšğšŒğš ğšğš ğšœğš˜ğš ğš˜ ğšŒğš›ğš’ğšŠğšğš˜ğš› ğš˜ğšğš’ğšŒğš’ğšŠğš• ğšğšŠ ğš…ğ™»-ğ™±ğ™¾ğšƒ, ğš ğšŠğš™ğš›ğšğšœğšğš—ğšğš˜ ğšğšœğšœğšŠ ğšŸğšğš›ğšœğšŠğš˜ ğšğšŠ ğšŸğš•ğš‹ğšŠğšœğš ğšŒğš˜ğš– ğšŒğš˜ğš–ğšŠğš—ğšğš˜ğšœ ğšœğš’ğš–ğš™ğš•ğšğšœ. ğš‚ğšğš’ ğššğšğš ğš—ğšğš– ğšğš˜ğšğš˜ğšœ ğšğšğš– ğšŒğš˜ğš—ğšğš’ğšŒğš˜ğšğšœ ğšğš ğšŒğš˜ğš–ğš™ğš›ğšŠğš› ğš˜ğš ğšŠğš•ğšğšğšŠğš› ğšğš– ğ™±ğš˜ğš, ğš™ğš˜ğš› ğš’ğšœğšœğš˜ ğšğš˜ğš’ ğšŒğš›ğš’ğšŠğšğšŠ ğšğšœğšœğšŠ ğšŸğšğš›ğšœğšŠğš˜.

ğš‚ğš’ğš—ğšğšŠ-ğšœğš ğš•ğš’ğšŸğš›ğš ğš™ğš›ğšŠ ğšğšğš’ğšğšŠğš› ğš˜ ğš—ğš˜ğš–ğš ğš ğšŠğšœ ğšŒğš˜ğš’ğšœğšŠğšœ ğš—ğš˜ ğ™±ğš˜ğš ğš ğšğšŠğš£ğšğš› ğš˜ğššğšğš ğšğšğšœğšğš“ğšŠğš› ğšŒğš˜ğš– ğšğš•ğšŠ, ğš™ğš˜ğš›ğšğš– ğšğšğš’ğš¡ğšğš– ğš™ğšğš•ğš˜ ğš–ğšğš—ğš˜ğšœ ğš–ğšğšğšœ ğ™²ğšğ™´ğ™³ğ™¸ğšƒğ™¾ğš‚ ğ™¿ğ™¾ğš ğ™¶ğ™´ğ™½ğšƒğ™¸ğ™»ğ™´ğš‰ğ™° ğŸ—¿ğŸ·.

ğš‚ğš ğšğš’ğšŸğšğš› ğšŠğš•ğšğšğš– ğš™ğš›ğš˜ğš‹ğš•ğšğš–ğšŠ ğšğšŠğš•ğš ğšŒğš˜ğš–ğš’ğšğš˜!

ğ™¼ğ™´ğš„ ğ™½ğš„ğ™¼ğ™´ğšğ™¾;

/////
ğš…ğ™¸ğšğš„ğš‚
ğš ğšŠ.ğš–ğš/ğŸ»ğŸ»ğŸ¾ğŸºğŸ¿ğŸ¿ğŸ¾ğŸ¹ğŸ¿ğŸ¸ğŸ·ğŸ¸
////


////////////
ğ™¼ğ™´ğš„ ğ™¸ğ™½ğš‚ğšƒğ™°: @ğš™ğššğš™ğšŸğš’ğš›ğšğšœ
//////


ğ™±ğšˆğ™´ ğ™±ğšˆğ™´
( ğš€ğš„ğ™°ğ™»ğš€ğš„ğ™´ğš ğ™´ğšğšğ™¾ ğ™¹ğ™° ğš‚ğ™°ğ™±ğ™´ ): ğ™±ğšğ™¾ğšƒğ™° ğ™½ğ™¾ ğ™¿ğš…:
ğš ğšŠ.ğš–ğš/ğŸ»ğŸ»ğŸ¾ğŸºğŸ¿ğŸ¿ğŸ¾ğŸ¹ğŸ¿ğŸ¸ğŸ·ğŸ¸

/// ğ™±ğšˆ: ğš…ğ™¸ğšğš„ğš‚ \\\\
*/


/// ğ™±ğšˆ: ğš…ğ™¸ğšğš„ğš‚ \\\\

const fs = require('fs')
const Pino = require('pino')
const chalk = require("chalk")
const cfonts = require('cfonts')

const {
Browsers,
DisconnectReason,
default: makeWASocket,
useMultiFileAuthState,
fetchLatestBaileysVersion
} = require ('@WhiskeySockets/baileys')

// Cores Dos consoles
gren = chalk.hex("#10b911").italic
rose = chalk.hex("#a519c8").italic
rosa = chalk.hex("#ec3185").italic
azul = chalk.hex("#23ddf1").italic
verde = chalk.hex("#36f972").italic
branco = chalk.hex("#ffffff").italic

green = chalk.green.italic
vermelho = chalk.red.italic
amarelo  = chalk.yellow.italic

const settings = JSON.parse(fs.readFileSync("./arquivos/settings.json"))

const p = settings.p
const dono = settings.dono
const nomeBot = settings.nomeBot

const StartBot = async() => {

const { 
version, isLatest
} = await fetchLatestBaileysVersion()

const { 
state, saveCreds 
} = await useMultiFileAuthState('./qrcode')

const banner = cfonts.render(('base vl'),
{
 font: "simple" ,
 align: "center",
 color: ["red"]
})
console.log(banner.string)
  
const sock = makeWASocket({
auth: state,
printQRInTerminal: true,
syncFullHistory: false,
logger: Pino({ level: 'silent'}),
browser: Browsers.macOS('Desktop'),
generateHighQualityLinkPreview: true
})

console.log(rosa(`
Seja Bem Vindo a base vl, criada por blackzin e aprimorada por pqpvirus!
`))

sock.ev.process(
async(events) => {
if(events['connection.update']) {
const update = events['connection.update']
const { connection, lastDisconnect } = update
if(connection === 'close') {
console.log(amarelo('\n[Xi men o bot caiu :( ]\n',
vermelho('VocÃª estÃ¡ desconectado.')))
if(lastDisconnect) {StartBot()}}
if(connection === 'open') {
sock.sendMessage(dono,{text:`Oi virus obrigado por disponibilizar essa base, agora irei criar meu bot ğŸ¤§ obrigado a vocÃª e ao blackzin`})
console.log(green(`ğŸ’¥BOT CONECTADOğŸ’¥`))}
} 
  
// credenciais atualizadas
if(events['creds.update']) {
await saveCreds()
}

if(events['chats.delete']) {
console.log(amarelo('\n',`CONVERSAS APAGADAS\n`,(vermelho(events['chats.delete']))))
}

if(events['messaging-history.set']) {
const { chats, contacts, messages 
} =  events['messaging-history.set']
/*console.log(
amarelo(`\n[ âš¡ï¸ HISTÃ“RICO DE MENSAGENS âš¡ï¸ ]\n`,
amarelo(`CHAT:`,vermelho(`${chats.length}\n`), 
amarelo(`CONTATOS:`, vermelho(`${contacts.length}\n`),
amarelo(`MENSAGEM:`, vermelho(`${messages.length}`))))))}*/
}

if(events['messages.upsert']) {
const mek = events['messages.upsert']
for(const info of mek.messages) {
if (info.message && typeof info.message === 'object') {
const type = Object.keys(info.message)[0];
await sock.readMessages([info.key])

if(events['contacts.update']) {
for(const contact of events['contacts.update']) {
if(typeof contact.imgUrl !== 'undefined') {
  if(info.key.fromMe) return
const newUrl = contact.imgUrl === null? null :
await sock.profilePictureUrl(contact.id).catch(() => null)
console.log(amarelo('\n',`[ ğŸ‘¤ NOVA FOTO ğŸ‘¤ ]\n`,
amarelo(`UsuÃ¡rio:`,vermelho(`${contact.id}\n`,
amarelo(`Foto:`,vermelho(`${newUrl}`))))))}}}

const body = 
(type === 'conversation' && info.message.conversation.startsWith(p)) ? info.message.conversation:
(type === 'extendedTextMessage') && info.message[type].text.startsWith(p) ? info.message[type].text: ''
const budy =
(type === 'conversation') ? info.message.conversation: 
(type === 'extendedTextMessage') ? info.message.extendedTextMessage.text: ''

const from = info.key.remoteJid 
const isGroup = from.endsWith("@g.us")
const sender = isGroup ? info.key.participant: from
const comando = body.slice(1).trim().split(/ +/).shift().toLowerCase()
const isCmd = body.startsWith(p)
const pushname = info.pushName ? info.pushName : nomeBot
const groupMetadata = isGroup ? await sock.groupMetadata(from): ""
const groupName = isGroup ? groupMetadata.subject: ""
const groupDesc = isGroup ? groupMetadata.desc : ""
const args = body.trim().split(/ +/).splice(1)
const q = args.join(' ')

if(!isGroup && isCmd)
console.log(`
${branco(`[ â—ï¸ COMANDO NO PRIVADOï¸ â— ]`)}
${gren(`[ ğŸ‘¤ ] NOME:`,rose(`${pushname}`))}
${gren(`[ ğŸ¤– ] COMANDO:`,rose(`${comando}`))}`)

if(isGroup && isCmd)
console.log(`
${branco(`[ ï¸â—ï¸ COMANDO EM GRUPO â—ï¸ï¸ ]`)}
${gren(`[ ğŸ‘¥ï¸ ] GRUPO:`,rose(`${groupName}`))}
${gren(`[ ğŸ‘¤ ] NOME:`,rose(`${pushname}`))}
${gren(`[ ğŸ¤– ] COMANDO:`,rose(`${comando}`))}`)

if(!isCmd && !isGroup)
console.log(`
${branco(`[ ğŸ’¬ MENSAGEM NO PRIVADO ğŸ’¬ ]`)}
${rosa(`[ ğŸ‘¤ ] NOME:`,verde(`${pushname}`))}
${rosa(`[ ğŸ’­ ] MENSAGEM:`,verde(`${budy}`))}`)

if(isGroup && !isCmd) 
console.log(`
${branco(`[ ğŸ’¬ MENSAGEM EM GRUPO ğŸ’¬ ]`)}
${rosa(`[ ğŸ‘¥ï¸ ] GRUPO:`,verde(`${groupName}`))}
${rosa(`[ ğŸ‘¤ ] NOME:`,verde(`${pushname}`))}
${rosa(`[ ğŸ’­ ] MENSAGEM:`,verde(`${budy}`))}`)

}}}})
return sock
}

module.exports = { StartBot , vermelho, amarelo }